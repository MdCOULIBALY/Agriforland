######### Generated by Lwspanel #########
######### Ne pas modifier / Don't touch #########

# Redirections https agriforland.com
RewriteEngine On
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteCond %{HTTPS} !on
RewriteCond %{HTTP_HOST} ^(?:www\.)?agriforland\.com(?:.*)$ [nc]
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [redirect=301,L]

######### End Generated by Lwspanel #########
# Redirection non-www vers www

# Masquer les extensions .php et .html (version optimisée)
# Vérifier d'abord si le fichier .php existe
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^([^.]+)$ $1.php [NC,L]

# Si pas de .php, vérifier si le fichier .html existe
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^([^.]+)$ $1.html [NC,L]

# Rediriger les URLs avec .php vers les URLs sans extension
RewriteCond %{THE_REQUEST} /([^.]+)\.php [NC]
RewriteRule ^ /%1 [NC,L,R=301]

# Rediriger les URLs avec .html vers les URLs sans extension
RewriteCond %{THE_REQUEST} /([^.]+)\.html [NC]
RewriteRule ^ /%1 [NC,L,R=301]

<Files "sitemap.xml">
  AddType application/xml .xml
</Files>

<IfModule mod_expires.c>
ExpiresActive On
ExpiresByType image/jpg "access plus 1 year"
ExpiresByType image/jpeg "access plus 1 year"
ExpiresByType image/gif "access plus 1 year"

ExpiresByType image/png "access plus 1 year"
ExpiresByType image/webp "access plus 1 year"
ExpiresByType text/css "access plus 1 month"
ExpiresByType application/pdf "access plus 1 month"
ExpiresByType text/javascript "access plus 1 month"
ExpiresByType application/javascript "access plus 1 month"
ExpiresByType image/svg+xml "access plus 1 year"
</IfModule>


# Redirections pages supprimées vers accueil
Redirect 301 /index.html /
Redirect 301 /about/ /about.php
Redirect 301 /about /about.php
Redirect 301 /contact/ /contact.html
Redirect 301 /contacts.php /contact.html
Redirect 301 /shop/ /
Redirect 301 /boutique/ /
Redirect 301 /blog/ /blog.php
Redirect 301 /projects/ /projets.html
Redirect 301 /portfolio/ /portfolios.php

# Redirection générale pour toutes les autres pages supprimées
RedirectMatch 301 ^/produit/.* /
RedirectMatch 301 ^/service/.* /poles.html
RedirectMatch 301 ^/project/.* /projets.html
RedirectMatch 301 ^/categorie-produit/.* /