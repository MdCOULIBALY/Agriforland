<?php
include 'admin/includes/db.php';
?>

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title">AGRIFORLAND SARL - Opportunités de Carrière</title>
    
    <!-- Preconnect optimisé -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://unpkg.com">
    
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/@phosphor-icons/web@2.0.3/src/bold/style.css">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link href="css/Style.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        kanit: ['Kanit', 'sans-serif'],
                        roboto: ['Roboto', 'sans-serif'],
                    },
                    colors: {
                        agriforland: {
                            primary: '#a9cf46',
                            hover: '#ade126',
                            dark: '#759916',
                            bg: '#f6ffde',
                            bg2: '#fbfff0',
                        },
                    },
                },
            },
        };
    </script>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZKKVQJJCYG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-ZKKVQJJCYG');
    </script>
    
    <style>
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }
        .btn-custom {
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-custom:hover {
            transform: translateY(-2px);
        }
        
        /* Améliorations responsive */
        @media (max-width: 768px) {
            .card:hover {
                transform: none;
            }
        }
    </style>
</head>

<body class="bg-agriforland-bg text-black font-roboto">
    <!-- Preloader -->
    <div id="preloader" class="fixed inset-0 bg-agriforland-bg z-50 flex items-center justify-center">
        <div class="animate-triangle w-24 h-24 sm:w-32 sm:h-32">
            <img src="images/triangle-svgrepo-com.svg" alt="Chargement..." loading="lazy" class="w-full h-full object-contain triangle-img">
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-3 sm:px-4 py-3 flex items-center justify-between">
            <img 
                src="cache/logo-198x66-800.webp" 
                srcset="
                    cache/logo-198x66-480.webp 480w, 
                    cache/logo-198x66-800.webp 800w, 
                    cache/logo-198x66-1200.webp 1200w
                "
                sizes="(max-width: 600px) 480px, (max-width: 1000px) 800px, 1200px"
                alt="Logo Agriforland" 
                loading="lazy" 
                class="h-8 sm:h-10 md:h-12"
            >
            
            <!-- Menu Burger pour mobile -->
            <button id="menu-toggle" class="md:hidden text-gray-700 focus:outline-none p-1" aria-label="Ouvrir le menu">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
            
            <!-- Boutons (desktop) -->
            <div class="hidden md:flex gap-3 items-center ml-auto">
                <!-- Language Selector -->
                <div class="relative inline-block text-left">
                    <select id="language-selector" class="block appearance-none bg-white border border-gray-300 hover:border-gray-500 px-2 py-1 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline text-sm">
                        <option value="fr" data-icon="images/fr.webp">Français</option>
                        <option value="en" data-icon="images/en.webp">English</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2">
                        <img id="language-icon" loading="lazy" src="images/fr.webp" alt="Language" class="h-4 w-4">
                    </div>
                </div>
                <a href="recrutement.html" class="bg-agriforland-primary px-4 py-2 rounded-md hover:text-black hover:bg-agriforland-hover transition text-sm whitespace-nowrap" data-i18n="join_us">Nous Rejoindre</a>
                <a href="contact.html" class="border border-gray-500 px-4 py-2 rounded-md hover:text-black hover:bg-agriforland-bg transition text-sm whitespace-nowrap" data-i18n="contact_us">Nous Contacter</a>
            </div>
        </div>

        <!-- Navigation Desktop -->
        <div class="border-t border-gray-100 bg-agriforland-bg hidden md:block">
            <nav class="max-w-7xl mx-auto px-4 py-3 flex justify-center gap-6 lg:gap-8 text-lg">
                <a href="index.php" class="nav-link hover:text-agriforland-primary transition-colors" data-i18n="home">Accueil</a>
                <a href="about.php" class="nav-link hover:text-agriforland-primary transition-colors" data-i18n="about">À Propos</a>
                <a href="poles.html" class="nav-link hover:text-agriforland-primary transition-colors" data-i18n="poles">Nos Pôles</a>
                <a href="projets.html" class="nav-link hover:text-agriforland-primary transition-colors" data-i18n="projects">Nos Projets</a>
                <a href="blog.php" class="nav-link hover:text-agriforland-primary transition-colors" data-i18n="blog">Blog</a>
                <a href="portfolios.php" class="nav-link hover:text-agriforland-primary transition-colors" data-i18n="portfolios">Portfolio</a>
            </nav>
        </div>

        <!-- Menu Mobile -->
        <div id="mobile-menu" class="md:hidden hidden bg-agriforland-bg px-4 pb-4">
            <nav class="flex flex-col gap-2 text-base">
                <a href="index.php" class="nav-link hover:text-agriforland-primary transition py-2" data-i18n="home">Accueil</a>
                <a href="about.php" class="nav-link hover:text-agriforland-primary transition py-2" data-i18n="about">À Propos</a>
                <a href="poles.html" class="nav-link hover:text-agriforland-primary transition py-2" data-i18n="poles">Nos Pôles</a>
                <a href="projets.html" class="nav-link hover:text-agriforland-primary transition py-2" data-i18n="projects">Nos Projets</a>
                <a href="blog.php" class="nav-link hover:text-agriforland-primary transition py-2" data-i18n="blog">Blog</a>
                <a href="portfolios.php" class="nav-link hover:text-agriforland-primary transition py-2" data-i18n="portfolios">Portfolio</a>
            </nav>
            <div class="mt-4 flex flex-col gap-3">
                <!-- Language Selector for Mobile -->
                <div class="relative">
                    <select id="language-selector-mobile" class="block appearance-none bg-white border border-gray-300 hover:border-gray-500 px-3 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline w-full text-sm">
                        <option value="fr" data-icon="images/fr.webp">Français</option>
                        <option value="en" data-icon="images/en.webp">English</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2">
                        <img id="language-icon-mobile" loading="lazy" src="images/fr.webp" alt="Language" class="h-4 w-4">
                    </div>
                </div>
                <a href="recrutement.html" class="bg-agriforland-primary px-4 py-3 rounded-md text-center text-sm hover:bg-agriforland-hover transition font-medium" data-i18n="join_us">Nous Rejoindre</a>
                <a href="contact.html" class="border border-gray-500 px-4 py-3 rounded-md text-center text-sm hover:bg-white transition font-medium" data-i18n="contact_us">Nous Contacter</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <section class="py-8 sm:py-12 px-4 max-w-7xl mx-auto bg-agriforland-bg min-h-screen">
        <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-6 sm:mb-8 md:mb-12 font-kanit px-4" data-i18n="join_team">Rejoignez Notre Équipe</h1>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 max-w-6xl mx-auto">
            <!-- Rejoindre nos Experts -->
            <div class="card bg-white rounded-2xl shadow-xl overflow-hidden">
                <div class="bg-agriforland-primary text-white p-4 sm:p-6 flex items-center justify-between">
                    <h4 class="text-lg sm:text-xl font-bold font-kanit" data-i18n="join_experts">Rejoindre nos Experts</h4>
                    <i class="ph ph-users text-2xl sm:text-3xl"></i>
                </div>
                <div class="p-4 sm:p-6 text-center">
                    <p class="text-gray-600 mb-4 sm:mb-6 text-sm sm:text-base leading-relaxed" data-i18n="experts_description">Mettez votre expertise au service de projets durables en agriculture, environnement et foresterie. Candidatez pour rejoindre nos experts !</p>
                    <a href="consultants.php" class="btn-custom bg-agriforland-primary text-white px-4 sm:px-6 py-2 sm:py-3 rounded-md hover:bg-agriforland-dark transition-all inline-flex items-center justify-center text-sm sm:text-base font-medium w-full sm:w-auto" data-i18n="apply">
                        Candidater
                        <i class="ph ph-arrow-right ml-2"></i>
                    </a>
                </div>
            </div>
            
            <!-- Opportunités de Recrutement -->
            <div class="card bg-white rounded-2xl shadow-xl overflow-hidden">
                <div class="bg-agriforland-primary text-white p-4 sm:p-6 flex items-center justify-between">
                    <h4 class="text-lg sm:text-xl font-bold font-kanit" data-i18n="recruitment_opportunities">Opportunités de Recrutement</h4>
                    <i class="ph ph-file-text text-2xl sm:text-3xl"></i>
                </div>
                <div class="p-4 sm:p-6 text-center">
                    <p class="text-gray-600 mb-4 sm:mb-6 text-sm sm:text-base leading-relaxed" data-i18n="recruitment_description">Rejoignez une équipe dynamique pour façonner un avenir vert. Postulez maintenant à nos offres d'emploi !</p>
                    <a href="recrutements.html" class="btn-custom bg-agriforland-primary text-white px-4 sm:px-6 py-2 sm:py-3 rounded-md hover:bg-agriforland-dark transition-all inline-flex items-center justify-center text-sm sm:text-base font-medium w-full sm:w-auto" data-i18n="apply_now">
                        Postuler
                        <i class="ph ph-arrow-right ml-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </section>

  <!-- Footer -->
  <footer class="bg-[#3a3a3a] text-white py-12">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center border-b border-white/20 pb-6">
        <!-- Logo aligné à gauche -->
        <div class="mb-4 md:mb-0">
          <img 
            src="cache/logo-inverse-198x66-800.webp" 
            srcset="
              cache/logo-inverse-198x66-480.webp 480w, 
              cache/logo-inverse-198x66-800.webp 800w, 
              cache/logo-inverse-198x66-1200.webp 1200w
            "
            sizes="(max-width: 600px) 480px, (max-width: 1000px) 800px, 1200px"
            loading="lazy" 
            alt="" 
            data-alt-i18n="agriforland_logo"
            class="h-12"
          />
        </div>
        <!-- Réseaux sociaux alignés à droite -->
        <div class="text-center md:text-right">
          <p class="font-bold mb-2" data-i18n="follow_us">SUIVEZ-NOUS</p>
          <div class="flex justify-center md:justify-end gap-4 text-2xl">
            <a class="hover:text-[#a9cf46] transition-colors" href="#" aria-label="" data-aria-i18n="facebook"><i class="ph ph-facebook-logo"></i></a>
            <a class="hover:text-[#a9cf46] transition-colors" href="#" aria-label="" data-aria-i18n="instagram"><i class="ph ph-instagram-logo"></i></a>
            <a class="hover:text-[#a9cf46] transition-colors" href="#" aria-label="" data-aria-i18n="twitter"><i class="ph ph-twitter-logo"></i></a>
            <a class="hover:text-[#a9cf46] transition-colors" href="#" aria-label="" data-aria-i18n="linkedin"><i class="ph ph-linkedin-logo"></i></a>
          </div>
        </div>
      </div>
      <div class="grid md:grid-cols-4 gap-8 mt-6">
        <div class="border-b md:border-none pb-4 md:pb-0">
          <h4 class="font-bold mb-2" data-i18n="useful_links">Liens Utiles</h4>
          <ul class="text-sm space-y-1">
            <li class="hover:text-[#a9cf46] transition-colors"><a href="about.php" data-i18n="about">À Propos</a></li>
            <li class="hover:text-[#a9cf46] transition-colors"><a href="poles.html" data-i18n="poles">Nos Pôles</a></li>
            <li class="hover:text-[#a9cf46] transition-colors"><a href="projets.html" data-i18n="projects">Nos Projets</a></li>
        </ul>
        </div>
        <div class="border-b md:border-none pb-4 md:pb-0">
          <h4 class="font-bold mb-2" data-i18n="useful_links">Liens Utiles</h4> 
          <ul class="text-sm space-y-1">
            <li class="hover:text-[#a9cf46] transition-colors"><a href="blog.php" data-i18n="blog">Blog</a></li>
            <li class="hover:text-[#a9cf46] transition-colors"><a href="portfolios.php" data-i18n="portfolios">Portfolio</a></li>
            <li class="hover:text-[#a9cf46] transition-colors"><a href="contact.html" data-i18n="contact">Contact</a></li>
          </ul>
        </div>
        <div class="border-b md:border-none pb-4 md:pb-0">
          <h4 class="font-bold mb-2" data-i18n="others">Autres</h4>
          <ul class="text-sm space-y-1">
            <li class="hover:text-[#a9cf46] transition-colors"><a href="recrutement.html" data-i18n="join_us">Nous Rejoindre</a></li>
            <li class="hover:text-[#a9cf46] transition-colors"><a href="consultants.php" data-i18n="consultant_recruitment">Recrutement Consultant</a></li>
            <li class="hover:text-[#a9cf46] transition-colors"><a href="ranch.php" data-i18n="ranch">Notre Ranch</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-bold mb-2" data-i18n="newsletter">Newsletter</h4>
          <form id="newsletter-form" class="mt-6 px-4">
            <input type="email" name="newsletter_email" placeholder="Votre email" data-i18n-placeholder="your_email" required class="w-full px-3 py-2 rounded mb-2 text-black">
            <button type="submit" class="bg-[#a9cf46] w-full py-2 rounded" data-i18n="subscribe">S'inscrire</button>
            <p id="newsletter-msg" class="text-green-600 mt-2 hidden" data-i18n="newsletter_success">Merci pour votre inscription !</p>
          </form>
        </div>
      </div>
      <div class="flex flex-col md:flex-row justify-between items-center border-t border-b border-white/20 py-6 mt-6 text-xs text-white/60">
        <!-- Numéro de téléphone à gauche -->
        <div class="mb-2 md:mb-0">
          <a href="tel:+2252722332336" class="text-white font-bold hover:text-[#a9cf46] transition-colors">
            +225 27 22 332 336
          </a>
        </div>
        <!-- Copyright à droite -->
        <div data-i18n="copyright">
          © 2025 Agriforland. Tous droits réservés.
        </div>
      </div>
    </div>
  </footer>

    <!-- Scripts -->
    <script>
        // Language translations (complètes)
        const translations = {
            fr: {
                title: "AGRIFORLAND SARL - Opportunités de Carrière",
                join_us: "Nous Rejoindre",
                contact_us: "Nous Contacter",
                home: "Accueil",
                about: "À Propos",
                poles: "Nos Pôles",
                projects: "Nos Projets",
                blog: "Blog",
                portfolios: "Portfolio",
                join_team: "Rejoignez Notre Équipe",
                join_experts: "Rejoindre nos Experts",
                experts_description: "Mettez votre expertise au service de projets durables en agriculture, environnement et foresterie. Candidatez pour rejoindre nos experts !",
                apply: "Candidater",
                recruitment_opportunities: "Opportunités de Recrutement",
                recruitment_description: "Rejoignez une équipe dynamique pour façonner un avenir vert. Postulez maintenant à nos offres d'emploi !",
                apply_now: "Postuler",
                follow_us: "SUIVEZ-NOUS",
                useful_links: "Liens Utiles",
                recruitment: "Recrutement",
                consultant_recruitment: "Recrutement Consultant",
                our_group: "Notre Groupe",
                our_stories: "Nos Histoires",
                our_values: "Nos Valeurs",
                our_missions: "Nos Missions",
                our_teams: "Nos Équipes",
                our_ecofarms: "Nos Écofermes",
                others: "Autres",
                agroforestry: "Agroforesterie",
                mapping: "Cartographie",
                our_partners: "Nos Partenaires",
                newsletter: "Newsletter",
                your_email: "Votre email",
                subscribe: "S'inscrire",
                subscribing: "Inscription...",
                newsletter_success: "Merci pour votre inscription !",
                newsletter_error: "Erreur lors de l'inscription.",
                copyright: "© 2025 Agriforland. Tous droits réservés."
            },
            en: {
                title: "AGRIFORLAND SARL - Career Opportunities",
                join_us: "Join Us",
                contact_us: "Contact Us",
                home: "Home",
                about: "About",
                poles: "Our Divisions",
                projects: "Our Projects",
                blog: "Blog",
                portfolios: "Portfolio",
                join_team: "Join Our Team",
                join_experts: "Join Our Experts",
                experts_description: "Put your expertise to work on sustainable projects in agriculture, environment, and forestry. Apply to join our experts!",
                apply: "Apply",
                recruitment_opportunities: "Recruitment Opportunities",
                recruitment_description: "Join a dynamic team to shape a green future. Apply now to our job offers!",
                apply_now: "Apply Now",
                follow_us: "FOLLOW US",
                useful_links: "Useful Links",
                recruitment: "Recruitment",
                consultant_recruitment: "Consultant Recruitment",
                our_group: "Our Group",
                our_stories: "Our Stories",
                our_values: "Our Values",
                our_missions: "Our Missions",
                our_teams: "Our Teams",
                our_ecofarms: "Our Ecofarms",
                others: "Others",
                agroforestry: "Agroforestry",
                mapping: "Mapping",
                our_partners: "Our Partners",
                newsletter: "Newsletter",
                your_email: "Your email",
                subscribe: "Subscribe",
                subscribing: "Subscribing...",
                newsletter_success: "Thank you for subscribing!",
                newsletter_error: "Error during subscription.",
                copyright: "© 2025 Agriforland. All rights reserved."
            }
        };

        // Language switcher amélioré
        const languageSelectors = document.querySelectorAll('#language-selector, #language-selector-mobile');
        const languageIcons = document.querySelectorAll('#language-icon, #language-icon-mobile');

        function updateContent(lang) {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (translations[lang] && translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });
            document.documentElement.lang = lang;
            languageIcons.forEach(icon => icon.src = `images/${lang}.webp`);
            languageSelectors.forEach(selector => selector.value = lang);
        }

        languageSelectors.forEach(selector => {
            selector.addEventListener('change', (e) => {
                const selectedLang = e.target.value;
                updateContent(selectedLang);
                localStorage.setItem('language', selectedLang);
            });
        });

        // Set default language
        const savedLang = localStorage.getItem('language') || 'fr';
        updateContent(savedLang);

        // Preloader
        window.addEventListener("load", function () {
            const preloader = document.getElementById('preloader');
            preloader.classList.add('opacity-0', 'pointer-events-none', 'transition-opacity', 'duration-500');
            setTimeout(() => preloader.remove(), 500);
        });

        // Menu mobile amélioré
        const toggle = document.getElementById('menu-toggle');
        const menu = document.getElementById('mobile-menu');
        
        toggle.addEventListener('click', () => {
            menu.classList.toggle('hidden');
        });

        // Fermer le menu en cliquant sur un lien
        const mobileLinks = menu.querySelectorAll('a');
        mobileLinks.forEach(link => {
            link.addEventListener('click', () => {
                menu.classList.add('hidden');
            });
        });

        // Fermer le menu en cliquant en dehors
        document.addEventListener('click', (e) => {
            if (!toggle.contains(e.target) && !menu.contains(e.target)) {
                menu.classList.add('hidden');
            }
        });

        // Ajout de la classe active automatiquement
        const currentPage = window.location.pathname.split("/").pop();
        document.querySelectorAll('.nav-link').forEach(link => {
            const href = link.getAttribute('href');
            if (href === currentPage) {
                link.classList.add('text-agriforland-primary', 'border-b-2', 'border-agriforland-primary', 'font-semibold');
            }
        });

        // Newsletter form améliorée avec UX
        const newsletterForm = document.getElementById('newsletter-form');
        const newsletterMsg = document.getElementById('newsletter-msg');
        const newsletterBtn = document.getElementById('newsletter-btn');
        
        newsletterForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // État de chargement
            newsletterBtn.disabled = true;
            newsletterBtn.textContent = translations[savedLang].subscribing;
            
            try {
                const formData = new FormData(newsletterForm);
                const response = await fetch('back/newsletter.php', {
                    method: 'POST',
                    body: formData
                });
                
                if (response.ok) {
                    newsletterMsg.classList.remove('hidden', 'text-red-600');
                    newsletterMsg.classList.add('text-green-600');
                    newsletterMsg.textContent = translations[savedLang].newsletter_success;
                    newsletterForm.reset();
                } else {
                    newsletterMsg.classList.remove('hidden', 'text-green-600');
                    newsletterMsg.classList.add('text-red-600');
                    newsletterMsg.textContent = translations[savedLang].newsletter_error;
                }
            } catch (error) {
                newsletterMsg.classList.remove('hidden', 'text-green-600');
                newsletterMsg.classList.add('text-red-600');
                newsletterMsg.textContent = translations[savedLang].newsletter_error;
            } finally {
                // Restaurer le bouton
                newsletterBtn.disabled = false;
                newsletterBtn.textContent = translations[savedLang].subscribe;
                
                // Masquer le message après 5 secondes
                setTimeout(() => {
                    newsletterMsg.classList.add('hidden');
                }, 5000);
            }
        });
    </script>
</body>
</html>